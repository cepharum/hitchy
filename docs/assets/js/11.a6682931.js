(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{64:function(t,e,s){"use strict";s.r(e);var a=s(0),n=Object(a.a)({},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"hitchy-plugins"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#hitchy-plugins"}},[t._v("#")]),t._v(" Hitchy Plugins")]),t._v(" "),s("p",[t._v("In this topic you learn how to write plugins for Hitchy. It is also introducing common API of either plugin as assumed by Hitchy to be integrated properly.")]),t._v(" "),s("h2",{attrs:{id:"naming"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#naming"}},[t._v("#")]),t._v(" Naming")]),t._v(" "),s("p",[t._v("A plugin's name is equivalent to the base name of folder containing it. Thus, every plugin must be available in a separate folder.")]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("Example")]),t._v(" "),s("p",[t._v("A plugin locally available in folder "),s("strong",[t._v("/app/node_modules/hitchy-plugin-foo")]),t._v(" is named "),s("strong",[t._v("hitchy-plugin-foo")]),t._v(".")])]),t._v(" "),s("div",{staticClass:"custom-block warning"},[s("p",{staticClass:"custom-block-title"},[t._v("Convention")]),t._v(" "),s("p",[t._v("When publishing plugins for Hitchy as packages on npm or similar their name should start with "),s("strong",[t._v("hitchy-plugin-")]),t._v(" by convention. See the "),s("RouterLink",{attrs:{to:"/plugins.html"}},[t._v("moderated list of existing plugins")]),t._v(" for examples.")],1)]),t._v(" "),s("h2",{attrs:{id:"roles"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#roles"}},[t._v("#")]),t._v(" Roles")]),t._v(" "),s("p",[t._v("In addition to its name every plugin is assumed "),s("em",[t._v("to claim a role")]),t._v(" it is taking as part of an application. This role's name is identical to the plugin's name by default. But every plugin is able to choose a different role explicitly.")]),t._v(" "),s("h3",{attrs:{id:"why-using-roles"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#why-using-roles"}},[t._v("#")]),t._v(" Why Using Roles?")]),t._v(" "),s("p",[t._v("Roles are beneficial for creating complex applications. By supporting plugin roles it is possible to have different implementations for the same purpose resulting in same API available under same name - the role's name - at runtime.")]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("Example")]),t._v(" "),s("p",[t._v("The plugin hitchy-plugin-odem is claiming role "),s("strong",[t._v("odm")]),t._v(". Its API is exposed at runtime as "),s("code",[t._v("api.plugins.odm")]),t._v(".")]),t._v(" "),s("p",[t._v("A different plugin may be designed as a drop-in replacement for "),s("strong",[t._v("hitchy-plugin-odem")]),t._v(" by claiming same role "),s("strong",[t._v("odm")]),t._v(" and providing same API with a different implementation e.g. for interacting with a different backend for storing data.")])]),t._v(" "),s("h3",{attrs:{id:"static-vs-dynamic-vs-approved"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#static-vs-dynamic-vs-approved"}},[t._v("#")]),t._v(" Static vs. Dynamic vs. Approved")]),t._v(" "),s("p",[t._v("For every plugin a claimed role may be encountered in these situations:")]),t._v(" "),s("ol",[s("li",[s("p",[t._v("In its "),s("strong",[t._v("hitchy.json")]),t._v(" beacon file (see below) a plugin may claim role explicitly or rely on role equivalent to its name by default. This role is called the plugin's "),s("em",[t._v("static role")]),t._v(".")])]),t._v(" "),s("li",[s("p",[t._v("A plugin's API may include property "),s("code",[t._v("$meta")]),t._v(" to be merged with information read from its "),s("strong",[t._v("hitchy.json")]),t._v(" file before. This may include a "),s("code",[t._v("role")]),t._v(" in turn which is called the plugin's "),s("em",[t._v("dynamic role")]),t._v(".")])]),t._v(" "),s("li",[s("p",[t._v("One of these roles - preferring the dynamic role over the static one - becomes the plugin's "),s("em",[t._v("approved role")]),t._v(" which is going to be only considered one while integrating either plugin with the application.")]),t._v(" "),s("p",[t._v("The approved role of a plugin will be exposed as property "),s("code",[t._v("$role")]),t._v(" of its API.")])])]),t._v(" "),s("p",[t._v("This pattern is beneficial in plugins dynamically adopting their behaviour to an application's actual context. For example, a plugin may inspect list of available plugins and decide to replace some particular plugin unless application doesn't depend on that plugin at all.")]),t._v(" "),s("h3",{attrs:{id:"uniquity"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#uniquity"}},[t._v("#")]),t._v(" Uniquity")]),t._v(" "),s("p",[t._v("A plugin's "),s("a",{attrs:{href:"#static-vs-dynamic-vs-approved"}},[t._v("approved role")]),t._v(" must be unique in context of a single application. Thus, in a single application you can't have two plugins claiming same role to be approved.")]),t._v(" "),s("h2",{attrs:{id:"basic-file-layout"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#basic-file-layout"}},[t._v("#")]),t._v(" Basic File Layout")]),t._v(" "),s("h3",{attrs:{id:"minimally-required-files"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#minimally-required-files"}},[t._v("#")]),t._v(" Minimally Required Files")]),t._v(" "),s("p",[t._v("Every plugin must be implemented in its own folder.")]),t._v(" "),s("p",[t._v("This is achieved implicitly when distributing plugins as packages via npm. The folder's name is implicitly assumed to be the plugin's name.")]),t._v(" "),s("p",[t._v("Every plugin's folder must contain at least two files:")]),t._v(" "),s("ul",[s("li",[s("p",[s("strong",[t._v("hitchy.json")]),t._v(" is called the plugin's "),s("a",{attrs:{href:"#the-beacon-file"}},[s("em",[t._v("beacon file")])]),t._v(" for indicating that a folder is actually containing a Hitchy-compatible plugin. That's why "),s("strong",[t._v("this file must exist")]),t._v(".")])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("index.js")]),t._v(" must be provided for exporting the plugin's API. That API is used in two situations:")]),t._v(" "),s("ol",[s("li",[s("p",[t._v("It is used to integrate the plugin with an application that is based on Hitchy.")]),t._v(" "),s("p",[t._v("This is the "),s("a",{attrs:{href:"#common-plugin-api"}},[t._v("part which is described below")]),t._v(".")])]),t._v(" "),s("li",[s("p",[t._v("It may expose additional information and methods for use by the application at runtime. Therefore, it will be exposed as part of a collection in "),s("RouterLink",{attrs:{to:"/api/#api-plugins"}},[t._v("Hitchy's API")]),t._v(" using the plugin's role name.")],1),t._v(" "),s("p",[t._v("This "),s("a",{attrs:{href:"#a-plugin-s-particular-api"}},[t._v("part of API")]),t._v(" is optional and depends on actual plugin.")])])]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[t._v("module"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("exports")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("options"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" pluginHandles"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" myHandle")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" api "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// TODO: list elements of plugin's API here")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("p",[t._v("Complying with "),s("RouterLink",{attrs:{to:"/api/#using-common-module-pattern"}},[t._v("common module pattern")]),t._v(" is highly suggested to use the "),s("RouterLink",{attrs:{to:"/internals/bootstrap.html#validating-claimed-roles"}},[t._v("full potential of integrating with an application")]),t._v(". But it's not required and thus it's okay to export the plugin's API without:")],1),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[t._v("module"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// TODO: list elements of plugin's API here")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),s("p",[t._v("Using "),s("a",{attrs:{href:"https://docs.npmjs.com/files/package.json#main",target:"_blank",rel:"noopener noreferrer"}},[t._v("package.json"),s("OutboundLink")],1),t._v(" it is possible to select a different name used for loading plugin's API.")])])])]),t._v(" "),s("p",[t._v("As a result any plugin's folder should look similar to this layout:")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("+ hitchy-plugin-foo\n    hitchy.json\n    index.js\n")])])]),s("h3",{attrs:{id:"configuration"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#configuration"}},[t._v("#")]),t._v(" Configuration")]),t._v(" "),s("p",[t._v("Every plugin may provide configuration to be merged into resulting application's configuration by providing a sub-folder "),s("strong",[t._v("config")]),t._v(" containing one or more Javascript files each exposing another part of desired configuration.")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("+ hitchy-plugin-foo\n  + config\n      foo.js\n      bar.js  \n    hitchy.json\n    index.js\n")])])]),s("p",[t._v("Names of configuration files don't matter as long as they don't start with a full stop "),s("code",[t._v(".")]),t._v(" and end in "),s("strong",[t._v(".js")]),t._v(".")]),t._v(" "),s("p",[t._v("Either plugin's configuration as merged data of all files loaded here is exposed as "),s("a",{attrs:{href:"#plugin-config"}},[t._v("part of plugin's resulting API")]),t._v(". Configuration of all plugins and resulting application is merged and gets eventually exposed via "),s("RouterLink",{attrs:{to:"/api/#api-config"}},[t._v("Hitchy's API")]),t._v(".")],1),t._v(" "),s("h3",{attrs:{id:"components"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#components"}},[t._v("#")]),t._v(" Components")]),t._v(" "),s("p",[t._v("Just like the application itself every plugin may expose "),s("RouterLink",{attrs:{to:"/internals/components.html"}},[t._v("components")]),t._v(" to be discovered and exposed via Hitchy's API. Thus, a plugin may contain a folder "),s("strong",[t._v("api")]),t._v(" which in turn may contain any combination of the sub-folders "),s("strong",[t._v("controllers")]),t._v(", "),s("strong",[t._v("policies")]),t._v(", "),s("strong",[t._v("models")]),t._v(" and "),s("strong",[t._v("services")]),t._v(".")],1),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("Singular Names")]),t._v(" "),s("p",[t._v("Using singular names for those four folders is supported as well.")])]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("+ hitchy-plugin-foo\n  + api\n    + controllers\n        foo.js\n    + policies\n        bar.js\n    + services\n        foo.js\n        bar.js\n    + models\n        foo.js\n  + config\n      foo.js\n      bar.js  \n    hitchy.json\n    index.js\n")])])]),s("p",[t._v("Discovered components are exposed via "),s("RouterLink",{attrs:{to:"/api/#api-runtime"}},[t._v("Hitchy's API")]),t._v(".")],1),t._v(" "),s("h2",{attrs:{id:"the-beacon-file"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#the-beacon-file"}},[t._v("#")]),t._v(" The Beacon File")]),t._v(" "),s("p",[t._v("Every folder or package meant to be discovered as a Hitchy plugin must contain a file named "),s("strong",[t._v("hitchy.json")]),t._v(". It does not have to contain any information and thus could be as simple as this:")]),t._v(" "),s("div",{staticClass:"language-json extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("The file is used as a "),s("em",[t._v("beacon")]),t._v(" indicating its folder to contain a plugin for Hitchy. By relying on its presence discovery of plugins is pretty fast resulting in shorter startup times.")]),t._v(" "),s("p",[t._v("There may be actual content in the file, though, which is used to compile the plugin's "),s("a",{attrs:{href:"#meta-information"}},[t._v("meta information")]),t._v(".")]),t._v(" "),s("h2",{attrs:{id:"meta-information"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#meta-information"}},[t._v("#")]),t._v(" Meta Information")]),t._v(" "),s("p",[t._v("Every plugin has meta information attached. It may be explicitly provided in one of two sources:")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("The "),s("a",{attrs:{href:"#the-beacon-file"}},[t._v("beacon file")]),t._v(" is providing a plugin's "),s("em",[t._v("static meta information")]),t._v(".")])]),t._v(" "),s("li",[s("p",[t._v("The plugin's API exported from its "),s("a",{attrs:{href:"#basic-file-layout"}},[s("strong",[t._v("index.js")]),t._v(" file")]),t._v(" may expose its "),s("em",[t._v("dynamic meta information")]),t._v(".")])])]),t._v(" "),s("p",[t._v("Both sources are merged into single set of meta information with data found in latter source replacing data found in former one.")]),t._v(" "),s("p",[t._v("There are elements of meta information Hitchy is using while integrating discovered plugins. These are described below. Hitchy is assuming defaults or deriving values e.g. from a plugin's name when meta information lacks either element.")]),t._v(" "),s("p",[t._v("In addition a plugin's meta information may contain custom data which isn't used by Hitchy for integrating the plugin. It might be used by plugins or the application at runtime "),s("RouterLink",{attrs:{to:"/api/#api-plugins"}},[t._v("using Hitchy's API")]),t._v(".")],1),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),s("p",[t._v("Due to being processed in "),s("RouterLink",{attrs:{to:"/internals/bootstrap.html#discovery"}},[t._v("discovery stage of bootstrap")]),t._v(" meta information is available early and thus may be used to customize upcoming "),s("RouterLink",{attrs:{to:"/internals/architecture-basics.html#discovering-plugins"}},[t._v("stages of bootstrap")]),t._v(".")],1)]),t._v(" "),s("h3",{attrs:{id:"role"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#role"}},[t._v("#")]),t._v(" role")]),t._v(" "),s("p",[t._v("Every plugin has to claim a certain "),s("a",{attrs:{href:"#roles"}},[t._v("role")]),t._v(" by name. It defaults to the plugin's name which in turn is equivalent to the filename of folder containing the plugin's "),s("strong",[t._v("hitchy.json")]),t._v(" file.")]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),s("p",[t._v("Read more about "),s("a",{attrs:{href:"#roles"}},[t._v("roles of plugins")]),t._v(".")])]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("Example")]),t._v(" "),s("p",[t._v("The plugin "),s("strong",[t._v("hitchy-plugin-odem")]),t._v(" claims to take role "),s("strong",[t._v("odm")]),t._v(" in an application. It can do so in its "),s("strong",[t._v("hitchy.json")]),t._v(" file:")]),t._v(" "),s("p",[s("strong",[t._v("hitchy-plugin-odem/hitchy.json:")])]),t._v(" "),s("div",{staticClass:"language-json extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"role"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"odm"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("It can do so via its exported API as well:")]),t._v(" "),s("p",[s("strong",[t._v("hitchy-plugin-odem/index.js:")])]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[t._v("module"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    $meta"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        role"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"odm"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])]),t._v(" "),s("h3",{attrs:{id:"dependencies"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#dependencies"}},[t._v("#")]),t._v(" dependencies")]),t._v(" "),s("p",[t._v("Either plugin may declare "),s("em",[t._v("roles")]),t._v(" of plugins it depends on. This affects bootstrap in several ways:")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("When sorting plugins for sequential processing any plugin listing roles as its dependencies here is processed after those plugins claiming either role.")])]),t._v(" "),s("li",[s("p",[t._v("If any of the declared dependencies is missing the bootstrap fails cancelling whole application startup.")])])]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("Example")]),t._v(" "),s("p",[t._v("The plugin "),s("strong",[t._v("hitchy-plugin-odem-rest")]),t._v(" is declaring to depend on role "),s("strong",[t._v("odm")]),t._v(" which is claimed by plugin "),s("strong",[t._v("hitchy-plugin-odem")]),t._v(".")]),t._v(" "),s("p",[s("strong",[t._v("hitchy-plugin-odem-rest/hitchy.json:")])]),t._v(" "),s("div",{staticClass:"language-json extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"role"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"odm-provider"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"dependencies"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"odm"')]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])]),t._v(" "),s("h3",{attrs:{id:"dependants"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#dependants"}},[t._v("#")]),t._v(" dependants")]),t._v(" "),s("p",[t._v("A plugin is capable of listing roles depending on it without requiring plugins claiming those roles as dependency on their own.")]),t._v(" "),s("p",[t._v("This feature is important for controlling order of plugins to assure some plugin is processed between two other ones.")]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("Example")]),t._v(" "),s("p",[t._v("A plugin with role "),s("strong",[t._v("auth")]),t._v(" is working with a model "),s("strong",[t._v("User")]),t._v(" and thus claims to depend on plugin with role "),s("strong",[t._v("odm")]),t._v(" using a beacon file similar to this one:")]),t._v(" "),s("div",{staticClass:"language-json extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"role"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"auth"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"dependencies"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"odm"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("A plugin "),s("strong",[t._v("fast-user")]),t._v(" wants to transparently provide a different implementation for that model and thus needs to make sure it is processed after plugin with role "),s("strong",[t._v("odm")]),t._v(" and before plugin with role "),s("strong",[t._v("auth")]),t._v(". It's achieving that by using a beacon file like this one:")]),t._v(" "),s("div",{staticClass:"language-json extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"role"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"fast-user"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"dependencies"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"odm"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"dependants"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"auth"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])]),t._v(" "),s("h3",{attrs:{id:"deepcomponents"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#deepcomponents"}},[t._v("#")]),t._v(" deepComponents "),s("Badge",{attrs:{type:"info",text:"0.4.0"}})],1),t._v(" "),s("p",[t._v("When loading components of a plugin this boolean property controls whether Hitchy is deeply searching for components in either type of component's sub-folder or not. Deep search is enabled by default.")]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("Example")]),t._v(" "),s("p",[t._v("When set or omitted, a file "),s("strong",[t._v("api/controllers/user/management.js")]),t._v(" is discovered and exposed as "),s("code",[t._v("api.runtime.controllers.UserManagement")]),t._v(". Otherwise this particular file isn't discovered and therefore won't be exposed at all as it isn't found in "),s("strong",[t._v("api/controllers")]),t._v(" directly.")])]),t._v(" "),s("div",{staticClass:"custom-block warning"},[s("p",{staticClass:"custom-block-title"},[t._v("Compatibility")]),t._v(" "),s("p",[t._v("In versions 0.3.3 through 0.3.6 this option was available as "),s("RouterLink",{attrs:{to:"/api/#configuration"}},[s("code",[t._v("config.hitchy.deepComponents")])]),t._v(". Moving it into meta information was in support for swapping exposure and configuration stages of bootstrap.")],1),t._v(" "),s("p",[t._v("Versions before v0.3.3 did not support deep searching components at all. Due to enabling it by default now you need to explicitly set this property "),s("code",[t._v("false")]),t._v(" to keep the previous behaviour.")])]),t._v(" "),s("div",{staticClass:"custom-block warning"},[s("p",{staticClass:"custom-block-title"},[t._v("Risk of Conflicts")]),t._v(" "),s("p",[t._v("When deeply searching components two different files might be exposed under the same name due to the way files in sub-folders are processed.")]),t._v(" "),s("p",[t._v("A file "),s("strong",[t._v("api/controllers/management/user.js")]),t._v(" is discovered as "),s("strong",[t._v("management/user.js")]),t._v(". The "),s("RouterLink",{attrs:{to:"/internals/components.html#derivation-of-component-names"}},[t._v("derived name")]),t._v(" for the component would be "),s("strong",[t._v("UserManagement")]),t._v(".")],1),t._v(" "),s("p",[t._v("A file "),s("strong",[t._v("api/controllers/user-management.js")]),t._v(" is discovered as "),s("strong",[t._v("user-management.js")]),t._v(". The resulting component would be named "),s("strong",[t._v("UserManagement")]),t._v(" as well.")]),t._v(" "),s("p",[t._v("Deeply searching for components processes files before sub-folders, so in this example the former would be exposed last and thus replacing the latter.")])]),t._v(" "),s("h3",{attrs:{id:"appendfolders"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#appendfolders"}},[t._v("#")]),t._v(" appendFolders "),s("Badge",{attrs:{type:"info",text:"0.4.0"}})],1),t._v(" "),s("p",[t._v("When deeply searching for components Hitchy is "),s("RouterLink",{attrs:{to:"/internals/components.html#derivation-of-component-names"}},[t._v("using the relative path name of every component's module for deriving the resulting component's name")]),t._v(". This option is controlling whether names of containing sub-folders are prepended to files' base names in given order or appended to them in reverse order.")],1),t._v(" "),s("p",[t._v("The latter case is used by default so you need to explicitly set this property "),s("code",[t._v("false")]),t._v(" to establish the former case.")]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("Example")]),t._v(" "),s("p",[t._v("Consider an application with a "),s("strong",[t._v("api/services")]),t._v(" looking like this:")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("+ api/services\n  + management\n    + user\n        system-admin.js\n        guest.js\n      room.js  \n")])])]),s("p",[t._v("By default this results in exposing these service components:")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("SystemAdminUserManagement")])]),t._v(" "),s("li",[s("strong",[t._v("GuestUserManagement")])]),t._v(" "),s("li",[s("strong",[t._v("RoomManagement")])])]),t._v(" "),s("p",[t._v("When setting "),s("code",[t._v("appendFolder")]),t._v(" to be false the resulting service components are exposed like this:")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("ManagementUserSystemAdmin")])]),t._v(" "),s("li",[s("strong",[t._v("ManagementUserGuest")])]),t._v(" "),s("li",[s("strong",[t._v("ManagementRoom")])])])]),t._v(" "),s("div",{staticClass:"custom-block warning"},[s("p",{staticClass:"custom-block-title"},[t._v("Compatibility")]),t._v(" "),s("p",[t._v("In versions 0.3.3 through 0.3.6 this option was available as "),s("RouterLink",{attrs:{to:"/api/#configuration"}},[s("code",[t._v("config.hitchy.appendFolders")])]),t._v(". It has been moved to support swapping exposure and configuration stages of bootstrap.")],1),t._v(" "),s("p",[t._v("Versions before v0.3.3 did not support deep searching components at all. Thus, this option wasn't supported either.")])]),t._v(" "),s("h2",{attrs:{id:"common-plugin-api"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#common-plugin-api"}},[t._v("#")]),t._v(" Common Plugin API")]),t._v(" "),s("p",[t._v("This is a summary of properties and methods in a plugin's API supported by Hitchy for integrating the plugin with an application. See the "),s("RouterLink",{attrs:{to:"/internals/bootstrap.html"}},[t._v("description of process integrating plugins")]),t._v(" for additional information.")],1),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),s("p",[t._v("There are no two kinds of APIs for every plugin. But some properties of a plugin's API are detected and handled by Hitchy on integrating the plugin with an application while the rest of that API is ignored by Hitchy.")])]),t._v(" "),s("h3",{attrs:{id:"plugin-name"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#plugin-name"}},[t._v("#")]),t._v(" plugin.$name")]),t._v(" "),s("p",[t._v("This property names the plugin which is exposing this API.")]),t._v(" "),s("h3",{attrs:{id:"plugin-role"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#plugin-role"}},[t._v("#")]),t._v(" plugin.$role")]),t._v(" "),s("p",[t._v("This property names the role claimed by plugin exposing this API. Since accessing the plugin involves knowing the role this information may be considered redundant but is included for sake of integrity.")]),t._v(" "),s("h3",{attrs:{id:"plugin-meta"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#plugin-meta"}},[t._v("#")]),t._v(" plugin.$meta")]),t._v(" "),s("p",[t._v("When exported by "),s("a",{attrs:{href:"#basic-file-layout"}},[t._v("a plugin's "),s("strong",[t._v("index.js")]),t._v(" file")]),t._v(" this property is meant to provide information extending and/or replacing related information found in plugin's "),s("a",{attrs:{href:"#the-beacon-file"}},[t._v("beacon file")]),t._v(".")]),t._v(" "),s("p",[t._v("After "),s("RouterLink",{attrs:{to:"/internals/bootstrap.html#loading-plugins"}},[t._v("loading plugin in discovery stage")]),t._v(" exported information is merged with any information found in beacon file. Thus, this object is eventually providing final state of a plugin's meta information.")],1),t._v(" "),s("h3",{attrs:{id:"plugin-index"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#plugin-index"}},[t._v("#")]),t._v(" plugin.$index")]),t._v(" "),s("p",[t._v("Due to sorting plugins for sequential processing either plugin has an index into that list which is exposed in this property mostly for testing purposes.")]),t._v(" "),s("h3",{attrs:{id:"plugin-config"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#plugin-config"}},[t._v("#")]),t._v(" plugin.$config "),s("Badge",{attrs:{type:"info",text:"0.3.3"}})],1),t._v(" "),s("p",[t._v("When loading configuration files of a plugin a single object merged from information exported by either found file is exposed as part of plugin's API. The information is also merged with related configuration objects of all other plugins and the application itself into one "),s("RouterLink",{attrs:{to:"/api/#api-config"}},[t._v("global configuration object")]),t._v(".")],1),t._v(" "),s("h3",{attrs:{id:"plugin-ondiscovered"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#plugin-ondiscovered"}},[t._v("#")]),t._v(" plugin.onDiscovered()")]),t._v(" "),s("p",[s("strong",[t._v("Signature:")]),t._v(" "),s("code",[t._v("onDiscovered( options, pluginHandles, myHandle )")]),t._v(" ("),s("RouterLink",{attrs:{to:"/api/#common-module-function-pattern"}},[t._v("CMFP")]),t._v(")")],1),t._v(" "),s("p",[t._v("This optional method is invoked on all eventually integrated plugin's APIs have been loaded. At this point every plugin's API has been loaded and is available as part of provided "),s("RouterLink",{attrs:{to:"/internals/bootstrap.html#a-plugin-s-handle"}},[t._v("handles")]),t._v(" which is a dictionary mapping either plugin's "),s("em",[t._v("name")]),t._v(" into its handle. This dictionary includes discovered plugins that are dropped in favour of others.")],1),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),s("p",[t._v("Plugins may be discovered but fail to be integrated with the application eventually. This is mostly due to "),s("RouterLink",{attrs:{to:"/internals/bootstrap.html#validating-claimed-roles"}},[t._v("loosing claimed role")]),t._v(" to another plugin.")],1)]),t._v(" "),s("h3",{attrs:{id:"plugin-onexposing"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#plugin-onexposing"}},[t._v("#")]),t._v(" plugin.onExposing()")]),t._v(" "),s("p",[s("strong",[t._v("Signature:")]),t._v(" "),s("code",[t._v("onExposing( options, myHandle )")]),t._v(" ("),s("RouterLink",{attrs:{to:"/api/#common-module-function-pattern"}},[t._v("CMFP")]),t._v(")")],1),t._v(" "),s("p",[t._v("This optional method is invoked at start of exposure stage right before detecting either plugin's components and exposing them in "),s("RouterLink",{attrs:{to:"/api/#api-runtime"}},[t._v("Hitchy's API")]),t._v(".")],1),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),s("p",[t._v("Returning a promise is supported for deferring bootstrap until promise is settled. On rejecting promise or on throwing the bootstrap fails.")])]),t._v(" "),s("h3",{attrs:{id:"plugin-onexposed"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#plugin-onexposed"}},[t._v("#")]),t._v(" plugin.onExposed()")]),t._v(" "),s("p",[s("strong",[t._v("Signature:")]),t._v(" "),s("code",[t._v("onExposed( options, myHandle )")]),t._v(" ("),s("RouterLink",{attrs:{to:"/api/#common-module-function-pattern"}},[t._v("CMFP")]),t._v(")")],1),t._v(" "),s("p",[t._v("This optional method is invoked at end of exposure stage after having detecting and "),s("RouterLink",{attrs:{to:"/api/#api-runtime"}},[t._v("exposed")]),t._v(" either plugin's components.")],1),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),s("p",[t._v("Returning a promise is supported for deferring bootstrap until promise is settled. On rejecting promise or on throwing the bootstrap fails.")])]),t._v(" "),s("h3",{attrs:{id:"plugin-configure"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#plugin-configure"}},[t._v("#")]),t._v(" plugin.configure()")]),t._v(" "),s("p",[s("strong",[t._v("Signature:")]),t._v(" "),s("code",[t._v("configure( options, myHandle )")]),t._v(" ("),s("RouterLink",{attrs:{to:"/api/#common-module-function-pattern"}},[t._v("CMFP")]),t._v(")")],1),t._v(" "),s("p",[t._v("This optional method is invoked at end of configuration stage to request either plugin for fixing any "),s("a",{attrs:{href:"#configuration"}},[t._v("configuration read from its files")]),t._v(".")]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),s("p",[t._v("Returning a promise is supported for deferring bootstrap until promise is settled. On rejecting promise or on throwing the bootstrap fails.")])]),t._v(" "),s("h3",{attrs:{id:"plugin-initialize"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#plugin-initialize"}},[t._v("#")]),t._v(" plugin.initialize()")]),t._v(" "),s("p",[s("strong",[t._v("Signature:")]),t._v(" "),s("code",[t._v("initialize( options, myHandle )")]),t._v(" ("),s("RouterLink",{attrs:{to:"/api/#common-module-function-pattern"}},[t._v("CMFP")]),t._v(")")],1),t._v(" "),s("p",[t._v("This optional method is invoked so the plugin is able to initialise its resources e.g. by connecting to some database.")]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),s("p",[t._v("Returning a promise is supported for deferring bootstrap until promise is settled. On rejecting promise or on throwing the bootstrap fails.")])]),t._v(" "),s("h3",{attrs:{id:"plugin-policies"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#plugin-policies"}},[t._v("#")]),t._v(" plugin.policies")]),t._v(" "),s("p",[s("strong",[t._v("Signatures:")]),t._v(" "),s("code",[t._v("policies")]),t._v(" or "),s("code",[t._v("policies( options, myHandle )")]),t._v(" ("),s("RouterLink",{attrs:{to:"/api/#common-module-function-pattern"}},[t._v("CMFP")]),t._v(")")],1),t._v(" "),s("p",[t._v("This optional property or method is used to fetch a plugin's routing declarations for policies during "),s("RouterLink",{attrs:{to:"/internals/bootstrap.html#routing"}},[t._v("routing stage of bootstrap")]),t._v(". It is either an object with structure equivalent to the one "),s("RouterLink",{attrs:{to:"/api/#config-policies"}},[t._v("supported in configuration")]),t._v(" or some method invoked in compliance with "),s("RouterLink",{attrs:{to:"/api/#common-module-function-pattern"}},[t._v("common module function pattern")]),t._v(" to get that set of declarations.")],1),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),s("p",[t._v("In addition, it is possible to expose this property as a "),s("a",{attrs:{href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Using_promises",target:"_blank",rel:"noopener noreferrer"}},[t._v("Promise"),s("OutboundLink")],1),t._v(" which is fulfilled with the actual set of routing declarations.")])]),t._v(" "),s("div",{staticClass:"custom-block warning"},[s("p",{staticClass:"custom-block-title"},[t._v('Supporting "Slots"')]),t._v(" "),s("p",[t._v("In opposition to an application's custom routing declarations, a plugin is capable of choosing virtual routing slots "),s("code",[t._v("before")]),t._v(" and "),s("code",[t._v("after")]),t._v(", only. In opposition to application's actual support for routing slots those names are used to pick the "),s("RouterLink",{attrs:{to:"/internals/routing-basics.html#routing-stages"}},[t._v("block of policies either preceding or succeeding the block of routes")]),t._v(".")],1)]),t._v(" "),s("h3",{attrs:{id:"plugin-routes"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#plugin-routes"}},[t._v("#")]),t._v(" plugin.routes")]),t._v(" "),s("p",[s("strong",[t._v("Signatures:")]),t._v(" "),s("code",[t._v("routes")]),t._v(" or "),s("code",[t._v("routes( options, myHandle )")]),t._v(" ("),s("RouterLink",{attrs:{to:"/api/#common-module-function-pattern"}},[t._v("CMFP")]),t._v(")")],1),t._v(" "),s("p",[t._v("Similar to "),s("a",{attrs:{href:"#plugin-policies"}},[s("code",[t._v("plugin.policies")])]),t._v(" this optional property or method is used to fetch plugin's routing declarations for (terminal) routes during "),s("RouterLink",{attrs:{to:"/internals/bootstrap.html#routing"}},[t._v("routing stage of bootstrap")]),t._v(". See its "),s("RouterLink",{attrs:{to:"/api/#config-routes"}},[t._v("configuration counterpart")]),t._v(" for information on supported syntax.")],1),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),s("p",[t._v("In addition, it is possible to expose this property as a "),s("a",{attrs:{href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Using_promises",target:"_blank",rel:"noopener noreferrer"}},[t._v("Promise"),s("OutboundLink")],1),t._v(" which is fulfilled with the actual set of routing declarations.")])]),t._v(" "),s("div",{staticClass:"custom-block warning"},[s("p",{staticClass:"custom-block-title"},[t._v('Supporting "Slots"')]),t._v(" "),s("p",[t._v("In opposition to an application's custom routing declarations, a plugin is capable of choosing virtual routing slots "),s("code",[t._v("before")]),t._v(" and "),s("code",[t._v("after")]),t._v(", only. In opposition to application's actual support for routing slots those names are used to pick the "),s("RouterLink",{attrs:{to:"/internals/routing-basics.html#focusing-on-routes"}},[t._v("block of routes either preceding or succeeding the block of blueprint routes")]),t._v(".")],1)]),t._v(" "),s("h3",{attrs:{id:"plugin-blueprints"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#plugin-blueprints"}},[t._v("#")]),t._v(" plugin.blueprints")]),t._v(" "),s("p",[s("strong",[t._v("Signatures:")]),t._v(" "),s("code",[t._v("routes")]),t._v(" or "),s("code",[t._v("routes( options, myHandle )")]),t._v(" ("),s("RouterLink",{attrs:{to:"/api/#common-module-function-pattern"}},[t._v("CMFP")]),t._v(")")],1),t._v(" "),s("p",[t._v("Similar to "),s("a",{attrs:{href:"#plugin-routes"}},[s("code",[t._v("plugin.routes")])]),t._v(" this optional property or method is used to fetch plugin's routing declarations for "),s("RouterLink",{attrs:{to:"/internals/routing-basics.html#focusing-on-routes"}},[t._v("blueprint routes")]),t._v(" during "),s("RouterLink",{attrs:{to:"/internals/bootstrap.html#routing"}},[t._v("routing stage of bootstrap")]),t._v(". The supported syntax is basically identical to the one supported by "),s("code",[t._v("plugin.routes")]),t._v(", though blueprints are limited in multiple ways:")],1),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),s("p",[t._v("In addition, it is possible to expose this property as a "),s("a",{attrs:{href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Using_promises",target:"_blank",rel:"noopener noreferrer"}},[t._v("Promise"),s("OutboundLink")],1),t._v(" which is fulfilled with the actual set of routing declarations.")])]),t._v(" "),s("div",{staticClass:"custom-block warning"},[s("p",{staticClass:"custom-block-title"},[t._v('Supporting "Slots"')]),t._v(" "),s("p",[t._v("When it comes to declaring blueprints there is no support for selecting any kind of "),s("em",[t._v("routing slot")]),t._v(". Thus, declarations of blueprint routes don't support sub-divisions like policies or routes.")])]),t._v(" "),s("h3",{attrs:{id:"plugin-shutdown"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#plugin-shutdown"}},[t._v("#")]),t._v(" plugin.shutdown()")]),t._v(" "),s("p",[s("strong",[t._v("Signature:")]),t._v(" "),s("code",[t._v("shutdown( options, myHandle )")]),t._v(" ("),s("RouterLink",{attrs:{to:"/api/#common-module-function-pattern"}},[t._v("CMFP")]),t._v(")")],1),t._v(" "),s("p",[t._v("This optional method is invoked on gracefully shutting down Hitchy-based application. It is meant to enable a plugin to release its resources e.g. by disconnecting from some database.")]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),s("p",[t._v("Returning a promise is supported for deferring bootstrap until promise is settled.")])]),t._v(" "),s("h2",{attrs:{id:"a-plugin-s-particular-api"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#a-plugin-s-particular-api"}},[t._v("#")]),t._v(" A Plugin's Particular API")]),t._v(" "),s("p",[t._v("In addition to complying with Hitchy's Plugin API every plugin may expose its own API to be made available via "),s("RouterLink",{attrs:{to:"/api/#api-plugins"}},[t._v("Hitchy's API")]),t._v(" available at runtime of a Hitchy-based application.")],1),t._v(" "),s("p",[t._v("A plugin's API is specific to either plugin and thus you should consult the plugin's documentation.")]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),s("p",[t._v("There are no two kinds of APIs for every plugin. But some properties of a plugin's API are detected and handled by Hitchy on integrating the plugin with an application while the rest of that API is ignored by Hitchy.")]),t._v(" "),s("p",[t._v("The API eventually exposed via Hitchy's API is always covering both parts of a plugin's API.")])]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("Example")]),t._v(" "),s("p",[t._v("A plugin named "),s("strong",[t._v("my-plugin")]),t._v(" and claiming role "),s("strong",[t._v("widgets")]),t._v(" exposes an API like this:")]),t._v(" "),s("p",[s("strong",[t._v("my-plugin/index.js:")])]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Widget")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\nmodule"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("createWidget")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("name")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    Widget"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("p",[t._v("The application is capable of using this API using "),s("code",[t._v("api.plugins.widgets.createWidget( name )")]),t._v(" or "),s("code",[t._v("new api.plugins.widgets.Widget()")]),t._v(".")])])])}),[],!1,null,null,null);e.default=n.exports}}]);