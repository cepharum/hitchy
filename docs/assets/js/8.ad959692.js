(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{56:function(e,t,i){"use strict";i.r(t);var a=i(0),s=Object(a.a)({},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[i("h1",{attrs:{id:"hitchy-plugins"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#hitchy-plugins","aria-hidden":"true"}},[e._v("#")]),e._v(" Hitchy Plugins")]),e._v(" "),i("p",[e._v("In this topic you learn how to write plugins for Hitchy. It is also introducing common API of either plugin as assumed by Hitchy to be integrated properly.")]),e._v(" "),i("h2",{attrs:{id:"basics"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#basics","aria-hidden":"true"}},[e._v("#")]),e._v(" Basics")]),e._v(" "),i("p",[e._v("Every plugin for Hitchy is a package or simply some local folder containing certain files to be discovered by Hitchy.")]),e._v(" "),i("h3",{attrs:{id:"naming"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#naming","aria-hidden":"true"}},[e._v("#")]),e._v(" Naming")]),e._v(" "),i("p",[e._v("A plugin's name is equivalent to the base name of folder containing it.")]),e._v(" "),i("div",{staticClass:"tip custom-block"},[i("p",{staticClass:"custom-block-title"},[e._v("Example")]),e._v(" "),i("p",[e._v("A plugin locally available in folder "),i("strong",[e._v("/app/node_modules/hitchy-plugin-tooling")]),e._v(" is named "),i("strong",[e._v("hitchy-plugin-tooling")]),e._v(".")])]),e._v(" "),i("div",{staticClass:"warning custom-block"},[i("p",{staticClass:"custom-block-title"},[e._v("Convention")]),e._v(" "),i("p",[e._v("When publishing plugins for Hitchy as packages on npm or similar their name should start with "),i("strong",[e._v("hitchy-plugin-")]),e._v(" by convention. See the "),i("router-link",{attrs:{to:"/plugins.html"}},[e._v("moderated list of existing plugins")]),e._v(" for examples.")],1)]),e._v(" "),i("h3",{attrs:{id:"roles"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#roles","aria-hidden":"true"}},[e._v("#")]),e._v(" Roles")]),e._v(" "),i("p",[e._v("In addition to its name every plugin is assumed to claim a role it is taking as part of an application. This role's name is identical to the plugin's name by default. But every plugin is able to choose a different role explicitly.")]),e._v(" "),i("h4",{attrs:{id:"why-using-roles"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#why-using-roles","aria-hidden":"true"}},[e._v("#")]),e._v(" Why Using Roles?")]),e._v(" "),i("p",[e._v("Roles are beneficial for creating complex applications. By supporting plugin roles it is possible to have different implementations for the same purpose resulting in same API available under same name at runtime.")]),e._v(" "),i("div",{staticClass:"tip custom-block"},[i("p",{staticClass:"custom-block-title"},[e._v("Example")]),e._v(" "),i("p",[e._v("The plugin hitchy-plugin-odem is claiming role "),i("strong",[e._v("odm")]),e._v(". Its API is exposed at runtime as "),i("code",[e._v("api.plugins.odm")]),e._v(".")]),e._v(" "),i("p",[e._v("A different plugin may be designed as a drop-in replacement for "),i("strong",[e._v("hitchy-plugin-odem")]),e._v(" by claiming same role "),i("strong",[e._v("odm")]),e._v(" and providing same API with a different implementation e.g. for interacting with a different backend for storing data.")])]),e._v(" "),i("h4",{attrs:{id:"uniquity"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#uniquity","aria-hidden":"true"}},[e._v("#")]),e._v(" Uniquity")]),e._v(" "),i("p",[e._v("A plugin's role must be unique in context of a single application. Thus, in a single application you can't have two plugins claiming same role without one of the plugins depending on the other.")]),e._v(" "),i("h2",{attrs:{id:"the-beacon-file"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#the-beacon-file","aria-hidden":"true"}},[e._v("#")]),e._v(" The Beacon File")]),e._v(" "),i("p",[e._v("Every folder or package meant to be discovered as a Hitchy plugin must contain a file named "),i("strong",[e._v("hitchy.json")]),e._v(". This file doesn't have to contain any information and thus could be as simple as this:")]),e._v(" "),i("div",{staticClass:"language-json extra-class"},[i("pre",{pre:!0,attrs:{class:"language-json"}},[i("code",[i("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),i("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])])]),i("p",[e._v("The file is used as a "),i("em",[e._v("beacon")]),e._v(" indicating its folder to contain a plugin for Hitchy. By relying on its presence discovering plugins is pretty fast resulting in shorter startup times.")]),e._v(" "),i("p",[e._v("There may be actual content in the file, though.")]),e._v(" "),i("ul",[i("li",[i("p",[e._v("The content is playing an essential part in integrating either plugin as it might describe a plugin's slight deviation from API assumed by Hitchy.")])]),e._v(" "),i("li",[i("p",[e._v("It may give explicit values for defaults assumed otherwise.")])]),e._v(" "),i("li",[i("p",[e._v("Another option is declaring other plugins either plugin depends on. This is resulting in a certain dependency graph which is used to create a properly sorted list of plugins obeyed while integrating them with an application as well as on routing requests through routes exposed by either plugin.")])])]),e._v(" "),i("p",[e._v("Last but not least there may be custom information which is "),i("a",{attrs:{href:"#plugin-meta"}},[e._v("exposed as part of either plugin's API")]),e._v(".")]),e._v(" "),i("h3",{attrs:{id:"role"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#role","aria-hidden":"true"}},[e._v("#")]),e._v(" role")]),e._v(" "),i("p",[e._v("This property of "),i("strong",[e._v("hitchy.json")]),e._v(" file is statically claiming a certain "),i("a",{attrs:{href:"#roles"}},[e._v("role")]),e._v(" by name. It defaults to the plugin's name which in turn is equivalent to the filename of folder containing the "),i("strong",[e._v("hitchy.json")]),e._v(" file.")]),e._v(" "),i("p",[e._v("In opposition to that either plugin gets a chance to claim a different role dynamically e.g. after inspecting whole list of actually discovered plugins.")]),e._v(" "),i("h3",{attrs:{id:"dependencies"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#dependencies","aria-hidden":"true"}},[e._v("#")]),e._v(" dependencies")]),e._v(" "),i("p",[e._v("Either plugin may declare "),i("em",[e._v("roles")]),e._v(" of plugins it depends on. This affects bootstrap in several ways:")]),e._v(" "),i("ul",[i("li",[i("p",[e._v("When sorting plugins for sequential processing any plugin listing roles as its dependencies here is processed after those plugins claiming either role.")])]),e._v(" "),i("li",[i("p",[e._v("If any of the declared dependencies is missing the bootstrap fails cancelling whole application startup.")])])]),e._v(" "),i("div",{staticClass:"tip custom-block"},[i("p",{staticClass:"custom-block-title"},[e._v("Example")]),e._v(" "),i("p",[e._v("The plugin "),i("strong",[e._v("hitchy-plugin-odem-rest")]),e._v(" is declaring to depend on role "),i("strong",[e._v("odm")]),e._v(" which is claimed by plugin "),i("strong",[e._v("hitchy-plugin-odem")]),e._v(".")]),e._v(" "),i("p",[i("strong",[e._v("hitchy-plugin-odem-rest/hitchy.json:")])]),e._v(" "),i("div",{staticClass:"language-json extra-class"},[i("pre",{pre:!0,attrs:{class:"language-json"}},[i("code",[i("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n\t"),i("span",{pre:!0,attrs:{class:"token property"}},[e._v('"role"')]),i("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),i("span",{pre:!0,attrs:{class:"token string"}},[e._v('"odm-provider"')]),i("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n\t"),i("span",{pre:!0,attrs:{class:"token property"}},[e._v('"dependencies"')]),i("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),i("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),e._v("\n\t\t"),i("span",{pre:!0,attrs:{class:"token string"}},[e._v('"odm"')]),e._v("\n\t"),i("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),e._v("\n"),i("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])])])]),e._v(" "),i("h3",{attrs:{id:"dependants"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#dependants","aria-hidden":"true"}},[e._v("#")]),e._v(" dependants")]),e._v(" "),i("p",[e._v("A plugin is capable of listing roles depending on it without requiring plugins claiming those roles to declare related dependency on their own.")]),e._v(" "),i("p",[e._v("Using this property is less common but supported for sake of integrity as it is controlling sorting order of plugins in direction opposite to declaring dependencies as described above.")]),e._v(" "),i("h2",{attrs:{id:"common-plugin-api"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#common-plugin-api","aria-hidden":"true"}},[e._v("#")]),e._v(" Common Plugin API")]),e._v(" "),i("p",[e._v("This is a summary of properties and methods in a plugin's API supported by Hitchy for integrating the plugin with an application. See the "),i("router-link",{attrs:{to:"/internals/plugin-integration.html"}},[e._v("description of process integrating plugins")]),e._v(" for additional information.")],1),e._v(" "),i("h2",{attrs:{id:"a-plugin-s-particular-api"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#a-plugin-s-particular-api","aria-hidden":"true"}},[e._v("#")]),e._v(" A Plugin's Particular API")]),e._v(" "),i("p",[e._v("In addition to complying with Hitchy's Plugin API every plugin may expose its own API to be made available as part of Hitchy's API available at runtime of a Hitchy-based application.")]),e._v(" "),i("p",[e._v("A plugin's API is specific to either plugin and thus you should read related documentation of plugins used.")]),e._v(" "),i("p",[e._v("However, when integrating a plugin Hitchy is adding some properties describing the plugin and its integration with the application. These are listed below.")]),e._v(" "),i("h3",{attrs:{id:"plugin-name"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#plugin-name","aria-hidden":"true"}},[e._v("#")]),e._v(" plugin.$name")]),e._v(" "),i("p",[e._v("This property names the plugin which is exposing this API.")]),e._v(" "),i("h3",{attrs:{id:"plugin-role"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#plugin-role","aria-hidden":"true"}},[e._v("#")]),e._v(" plugin.$role")]),e._v(" "),i("p",[e._v("This property names the role claimed by plugin exposing this API. Since accessing the plugin involves knowing the role this information may be considered redundant but is included for sake of integrity.")]),e._v(" "),i("h3",{attrs:{id:"plugin-meta"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#plugin-meta","aria-hidden":"true"}},[e._v("#")]),e._v(" plugin.$meta")]),e._v(" "),i("p",[e._v("This object is representing code of plugin's hitchy.json file merged with additional information provided by plugin during its discovery and integration. It might be used to access custom information included with a plugin's hitchy.json file.")]),e._v(" "),i("h3",{attrs:{id:"plugin-index"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#plugin-index","aria-hidden":"true"}},[e._v("#")]),e._v(" plugin.$index")]),e._v(" "),i("p",[e._v("Due to sorting plugins for sequential processing either plugin has an index into that list which is exposed in this property mostly for testing purposes.")])])},[],!1,null,null,null);t.default=s.exports}}]);