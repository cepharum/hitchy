(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{52:function(t,s,a){"use strict";a.r(s);var e=a(0),n=Object(e.a)({},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"hitchy-s-api"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#hitchy-s-api","aria-hidden":"true"}},[t._v("#")]),t._v(" Hitchy's API")]),t._v(" "),a("p",[t._v("In this topic you learn "),a("a",{attrs:{href:"#gaining-access"}},[t._v("how to access Hitchy's API")]),t._v(" in components of your application. It provides a detailed introduction of "),a("a",{attrs:{href:"#api-elements"}},[t._v("features exposed in that API")]),t._v(". Finally, there is an introduction of additional properties and methods provided as part of "),a("a",{attrs:{href:"#request-helpers"}},[t._v("request")]),t._v(" and "),a("a",{attrs:{href:"#response-helpers"}},[t._v("response")]),t._v(" data available in controllers and policies.")]),t._v(" "),a("h2",{attrs:{id:"gaining-access"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#gaining-access","aria-hidden":"true"}},[t._v("#")]),t._v(" Gaining Access")]),t._v(" "),a("p",[t._v("In a fully running application Hitchy's API is available")]),t._v(" "),a("ul",[a("li",[t._v("in every plugin complying with one of two patterns named "),a("em",[t._v("common module pattern")]),t._v(" and "),a("em",[t._v("common module function pattern")]),t._v(",")]),t._v(" "),a("li",[t._v("in any function invoked on routing a request, that is\n"),a("ul",[a("li",[t._v("inline functions used in routing configurations,")]),t._v(" "),a("li",[t._v("methods of a controller and")]),t._v(" "),a("li",[t._v("methods of a policy.")])])])]),t._v(" "),a("h3",{attrs:{id:"using-common-module-pattern"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#using-common-module-pattern","aria-hidden":"true"}},[t._v("#")]),t._v(" Using Common Module Pattern")]),t._v(" "),a("p",[t._v("Plugins and components discovered by Hitchy are (consisting of) modules that may export an API as usual:")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[t._v("module"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("create")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// add some code here")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("customFunction")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// add some code here")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("This example shows a software module that's exposing two functions to be its API the usual way.")]),t._v(" "),a("p",[t._v("Hitchy's core supports so called "),a("em",[t._v("common module pattern")]),t._v(" when "),a("em",[t._v("discovering")]),t._v(" plugins and their components.")]),t._v(" "),a("div",{staticClass:"warning custom-block"},[a("p",{staticClass:"custom-block-title"},[t._v("Discovering Plugins?")]),t._v(" "),a("p",[t._v("In Hitchy "),a("em",[t._v("discovering")]),t._v(" a plugin is different from "),a("em",[t._v("requiring")]),t._v(" it. The term discovery refers to Hitchy's capability of "),a("router-link",{attrs:{to:"/internals/architecture-basics.html#discovering-plugins"}},[t._v("automatically loading a plugin during bootstrap")]),t._v(". In opposition to that any code of your application may still "),a("code",[t._v("require()")]),t._v(" modules the usual way though "),a("strong",[t._v("this is going to have some negative side effects for modules relying on "),a("em",[t._v("common module pattern")])]),t._v(".")],1)]),t._v(" "),a("p",[t._v("The common module pattern is a convention allowing any complying module to export a function instead of its API. This function is invoked by Hitchy's bootstrap code to retrieve the actual API of the module:")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[t._v("module"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("exports")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("options")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" api "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("create")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// add some code here")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("customFunction")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// add some code here")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("This is the counterpart of same module as before. But this time it is relying on the common module pattern mostly to gain access on Hitchy's API. During discovery of plugins and components any function exported from either module is invoked with Hitchy's API provided as "),a("code",[t._v("this")]),t._v(" and global options describing runtime context and arguments passed on starting Hitchy in first argument.")]),t._v(" "),a("div",{staticClass:"warning custom-block"},[a("p",{staticClass:"custom-block-title"},[t._v("Related Issues")]),t._v(" "),a("p",[t._v("On exporting an ES6 class in a module Hitchy might falsely consider this module to comply with common module pattern.")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MyServiceComponent")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// TODO add methods here")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\nmodule"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" MyServiceComponent"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("This results in error on Hitchy start regarding invoking your exposed class without operator "),a("code",[t._v("new")]),t._v(". As a fix you might need to wrap this class in a function to actually comply with common module pattern.")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[t._v("module"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("exports")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MyServiceComponent")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// TODO add methods here")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" MyServiceComponent"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("Alternatively you might add static property "),a("code",[t._v("useCMP")]),t._v(" set "),a("code",[t._v("false")]),t._v(" to prevent Hitchy from assuming this module is complying with common module pattern.")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MyServiceComponent")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// TODO add methods here")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("get")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useCMP")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\nmodule"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" MyServiceComponent"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])]),t._v(" "),a("h3",{attrs:{id:"in-request-handlers"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#in-request-handlers","aria-hidden":"true"}},[t._v("#")]),t._v(" In Request Handlers")]),t._v(" "),a("p",[t._v("In request handlers the API is exposed in two different ways:")]),t._v(" "),a("ol",[a("li",[a("p",[t._v("Every request handler is invoked with "),a("code",[t._v("this")]),t._v(" referring to some "),a("em",[t._v("request context")]),t._v(" which is including reference on Hitchy's API in property "),a("code",[t._v("api")]),t._v(":")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("someRequestHandler")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("req"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" res")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// access Hitchy's API via this.api here ...")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])]),t._v(" "),a("li",[a("p",[t._v("Starting with v0.2.0 the API is exposed as property "),a("code",[t._v("hitchy")]),t._v(" of given request descriptor as well. This enables use of arrow functions and helps with accessing the API in nested functions and callbacks more easily:")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("req"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" res")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// access Hitchy's API via req.hitchy here ...")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])])]),t._v(" "),a("h2",{attrs:{id:"options"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#options","aria-hidden":"true"}},[t._v("#")]),t._v(" Options")]),t._v(" "),a("p",[t._v("When talking about common module pattern before there was an argument passed providing so called "),a("em",[t._v("Hitchy options")]),t._v(".")]),t._v(" "),a("p",[t._v("Basically this is a set of parameters provided on invoking Hitchy. Usually this is done via Hitchy's CLI script. Thus, provided options are related to parameters provided on running CLI script. However, when testing Hitchy and its plugins it is possible to pass options from testing scripts as well.")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("hitchy /app --extensionFolder /some/different/path --debug\n")])])]),a("p",[t._v("There are options recognized by Hitchy and some of those get qualified during "),a("router-link",{attrs:{to:"/internals/architecture-basics.html#discovering-plugins"}},[t._v("bootstrap")]),t._v(".")],1),t._v(" "),a("p",[t._v("Additionally provided parameters are included with options available in common module pattern. That's why your application is implicitly capable of supporting custom CLI options for controlling its behaviour.")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("hitchy /app --useAuthProvider https://some.auth.provider.com\n")])])]),a("p",[t._v("These are options recognized and/or managed by Hitchy:")]),t._v(" "),a("h3",{attrs:{id:"options-projectfolder"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#options-projectfolder","aria-hidden":"true"}},[t._v("#")]),t._v(" options.projectFolder")]),t._v(" "),a("p",[t._v("This option is qualified during triangulation stage of bootstrap. It is addressing folder containing currently running application.")]),t._v(" "),a("h3",{attrs:{id:"options-hitchyfolder"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#options-hitchyfolder","aria-hidden":"true"}},[t._v("#")]),t._v(" options.hitchyFolder")]),t._v(" "),a("p",[t._v("This option is defined by Hitchy during triangulation stage of bootstrap. It is addressing folder containing Hitchy installation used to manage currently running application.")]),t._v(" "),a("h3",{attrs:{id:"options-extensionsfolder"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#options-extensionsfolder","aria-hidden":"true"}},[t._v("#")]),t._v(" options.extensionsFolder")]),t._v(" "),a("p",[t._v("This option is optionally addressing different folder assumed to contain all plugins to be discovered. The project folder is used in case of omitting this option.")]),t._v(" "),a("h3",{attrs:{id:"options-debug"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#options-debug","aria-hidden":"true"}},[t._v("#")]),t._v(" options.debug")]),t._v(" "),a("p",[t._v("This boolean option is controlling whether debug output is desired or not. Basically this option affects Hitchy to always enable any "),a("a",{attrs:{href:"#api-log"}},[t._v("logging facility")]),t._v(".")]),t._v(" "),a("h3",{attrs:{id:"options-dependencies"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#options-dependencies","aria-hidden":"true"}},[t._v("#")]),t._v(" options.dependencies")]),t._v(" "),a("p",[t._v("This option is supported to select plugins current application depends on. It is replacing any such list of plugins read from application's own "),a("strong",[t._v("hitchy.json")]),t._v(" file. In addition it is limiting set of eventually available plugins.")]),t._v(" "),a("h2",{attrs:{id:"api-elements"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#api-elements","aria-hidden":"true"}},[t._v("#")]),t._v(" API Elements")]),t._v(" "),a("p",[t._v("Hitchy's API can be divided into several sections to be described here.")]),t._v(" "),a("div",{staticClass:"tip custom-block"},[a("p",[t._v("The following description assumes you know "),a("a",{attrs:{href:"#gaining-access"}},[t._v("how to gain access on Hitchy's API")]),t._v(" in either situation, thus referring to it using just "),a("code",[t._v("api")]),t._v(".")])]),t._v(" "),a("h3",{attrs:{id:"api-runtime"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#api-runtime","aria-hidden":"true"}},[t._v("#")]),t._v(" api.runtime")]),t._v(" "),a("p",[t._v("This section of Hitchy's API is exposing a compilation of all components exposed by discovered plugins as well as current application itself. They are grouped by component type.")]),t._v(" "),a("ul",[a("li",[t._v("Controllers are exposed in "),a("code",[t._v("api.runtime.controllers")]),t._v(".")]),t._v(" "),a("li",[t._v("Policies are exposed in "),a("code",[t._v("api.runtime.policies")]),t._v(".")]),t._v(" "),a("li",[t._v("Models are exposed in "),a("code",[t._v("api.runtime.models")]),t._v(".")]),t._v(" "),a("li",[t._v("Services are exposed in "),a("code",[t._v("api.runtime.services")]),t._v(".")])]),t._v(" "),a("p",[t._v("For the sake of flexibility and fault tolerance either group is exposed using its singular name as well. Thus using "),a("code",[t._v("api.runtime.controller")]),t._v(" is equivalent to using "),a("code",[t._v("api.runtime.controllers")]),t._v(" etc.")]),t._v(" "),a("h3",{attrs:{id:"api-data"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#api-data","aria-hidden":"true"}},[t._v("#")]),t._v(" api.data")]),t._v(" "),a("p",[t._v("Hitchy's API gets sealed after bootstrap has finished to prevent intended or accidental change of any exposed API.")]),t._v(" "),a("p",[t._v("This property is excluded in particular to provide a common space multiple components can use for saving and sharing data that's exceeding the lifetime of a single request.")]),t._v(" "),a("h3",{attrs:{id:"api-log"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#api-log","aria-hidden":"true"}},[t._v("#")]),t._v(" api.log")]),t._v(" "),a("p",[t._v("This function is a generator for logging facilities. It is invoked with the name of a logging facility and returns another function which can be used to actually generate log messages on behalf of either facility.")]),t._v(" "),a("div",{staticClass:"tip custom-block"},[a("p",{staticClass:"custom-block-title"},[t._v("Example")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" AlertLog "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" api"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"hitchy:plugin:tooling:alert"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" DebugLog "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" api"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"hitchy:plugin:tooling:debug"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("DebugLog")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"got some configuration"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("AlertLog")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"connection lost"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])]),t._v(" "),a("p",[t._v("Basically, facilities are supported to cluster your application's log and help with controlling what messages are actually logged or not making it more useful in either situation.")]),t._v(" "),a("div",{staticClass:"tip custom-block"},[a("p",{staticClass:"custom-block-title"},[t._v("Environment-Based Control")]),t._v(" "),a("p",[t._v("Environment variable "),a("strong",[t._v("DEBUG")]),t._v(" is examined for providing a comma-separated list of facilities to be enabled.")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("DEBUG")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("hitchy:*,myapp:*,-*\n")])])]),a("p",[t._v("Every item of that list")]),t._v(" "),a("ul",[a("li",[t._v("is a facility name to be logged,")]),t._v(" "),a("li",[t._v("may be prefixed with single dash "),a("code",[t._v("-")]),t._v(" to explicitly exclude a matching facility from logging,")]),t._v(" "),a("li",[t._v("may contain asterisk "),a("code",[t._v("*")]),t._v(" for matching multiple facilities to be enabled or disabled.")])])]),t._v(" "),a("div",{staticClass:"warning custom-block"},[a("p",{staticClass:"custom-block-title"},[t._v("Naming Convention")]),t._v(" "),a("p",[t._v("Facility names should represent a hierarchy of facilities by extending the name of a superordinated facility with a colon and the intended facility's name.")]),t._v(" "),a("p",[t._v("Sticking to this pattern is beneficial on using asterisk "),a("code",[t._v("*")]),t._v(" in logging control.")])]),t._v(" "),a("h3",{attrs:{id:"api-utility-file"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#api-utility-file","aria-hidden":"true"}},[t._v("#")]),t._v(" api.utility.file")]),t._v(" "),a("p",[t._v("This subsection provides helper functions used by Hitchy for accessing local file system.")]),t._v(" "),a("div",{staticClass:"warning custom-block"},[a("p",{staticClass:"custom-block-title"},[t._v("Deprecation Warning")]),t._v(" "),a("p",[t._v("There is a more powerful package "),a("a",{attrs:{href:"https://www.npmjs.com/package/file-essentials",target:"_blank",rel:"noopener noreferrer"}},[t._v("file-essentials"),a("OutboundLink")],1),t._v(" and we consider to replace these functions with that package in a future release.")])]),t._v(" "),a("h3",{attrs:{id:"api-utility-promise"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#api-utility-promise","aria-hidden":"true"}},[t._v("#")]),t._v(" api.utility.promise")]),t._v(" "),a("p",[t._v("This subsection provides helper functions to simplify complex asynchronous processes using promises.")]),t._v(" "),a("div",{staticClass:"warning custom-block"},[a("p",{staticClass:"custom-block-title"},[t._v("Deprecation Warning")]),t._v(" "),a("p",[t._v("There is a more powerful package "),a("a",{attrs:{href:"https://www.npmjs.com/package/promise-essentials",target:"_blank",rel:"noopener noreferrer"}},[t._v("promise-essentials"),a("OutboundLink")],1),t._v(" and we consider to replace these functions with that package in a future release.")])]),t._v(" "),a("h3",{attrs:{id:"api-utility-object"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#api-utility-object","aria-hidden":"true"}},[t._v("#")]),t._v(" api.utility.object")]),t._v(" "),a("p",[t._v("This subsection provides helper functions for")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("deeply merging objects:")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[t._v("target "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" api"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("utility"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("object"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("merge")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" target"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" sourceA"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" sourceB"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])]),t._v(" "),a("li",[a("p",[t._v("deeply sealing objects:")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[t._v("object "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" api"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("utility"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("object"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("seal")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" object "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[t._v("A callback may be provided in second argument to be called on every object to be sealed. It is invoked with breadcrumb of property names as array of strings and assumed to return boolean indicating whether either object should be actually sealed or not.")])]),t._v(" "),a("li",[a("p",[t._v("deeply freezing objects:")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[t._v("object "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" api"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("utility"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("object"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("freeze")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" object "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[t._v("A callback may be provided in second argument to be called on every object to be frozen. It is invoked with breadcrumb of property names as array of strings and assumed to return boolean indicating whether either object should be actually frozen or not.")])])]),t._v(" "),a("h3",{attrs:{id:"api-utility-case"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#api-utility-case","aria-hidden":"true"}},[t._v("#")]),t._v(" api.utility.case")]),t._v(" "),a("p",[t._v("This subsection provides functions for converting between different practices for writing names.")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("kebab-case to PascalCase:")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[t._v("pascal "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" api"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("utility"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("case"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("kebabToPascal")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"kebab-case"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])]),t._v(" "),a("li",[a("p",[t._v("kebab-case to camelCase:")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[t._v("camel "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" api"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("utility"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("case"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("kebabToCamel")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"kebab-case"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])]),t._v(" "),a("li",[a("p",[t._v("PascalCase to kebab-case:")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[t._v("kebab "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" api"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("utility"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("case"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("pascalToKebab")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"PascalCase"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])]),t._v(" "),a("li",[a("p",[t._v("camelCase to kebab-case:")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[t._v("kebab "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" api"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("utility"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("case"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("camelToKebab")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"camelCase"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])]),t._v(" "),a("li",[a("p",[t._v("camelCase to PascalCase:")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[t._v("pascal "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" api"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("utility"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("case"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("camelToPascal")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"camelCase"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])])]),t._v(" "),a("h3",{attrs:{id:"api-client"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#api-client","aria-hidden":"true"}},[t._v("#")]),t._v(" api.Client")]),t._v(" "),a("p",[t._v("This class is providing router client suitable for locally triggering request dispatching.")]),t._v(" "),a("div",{staticClass:"warning custom-block"},[a("p",{staticClass:"custom-block-title"},[t._v("Obey The Naming!")]),t._v(" "),a("p",[t._v("This class is exposed using PascalCase name to comply with common rules of code style linters.")])]),t._v(" "),a("p",[t._v("This client can be used to simulate requests for testing purposes, for improved request processing e.g. via websockets or for locally triggering request handlers e.g. for transparently rewriting requests or similar.")]),t._v(" "),a("div",{staticClass:"tip custom-block"},[a("p",{staticClass:"custom-block-title"},[t._v("Example")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" client "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("api"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Client")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    method"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"POST"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n    url"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/some/internal/url?foo=bar"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    headers"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"content-type"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"text/json"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nclient"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("end")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("JSON")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("stringify")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" some"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"input"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" client"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("dispatch")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("res")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("statusCode "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("body")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("body")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("JSON")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("parse")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" body"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("toString")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"utf8"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("data")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// TODO: process response")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])]),t._v(" "),a("div",{staticClass:"tip custom-block"},[a("p",[t._v("This client simulates "),a("em",[t._v("most")]),t._v(" parts of "),a("a",{attrs:{href:"https://nodejs.org/dist/latest/docs/api/http.html#http_class_http_clientrequest",target:"_blank",rel:"noopener noreferrer"}},[t._v("ClientRequest"),a("OutboundLink")],1),t._v(" and "),a("a",{attrs:{href:"https://nodejs.org/dist/latest/docs/api/http.html#http_class_http_serverresponse",target:"_blank",rel:"noopener noreferrer"}},[t._v("ServerResponse"),a("OutboundLink")],1),t._v(". In addition method "),a("code",[t._v("res.body()")]),t._v(" is provided to simplify retrieval of response body.")])]),t._v(" "),a("h3",{attrs:{id:"api-plugins"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#api-plugins","aria-hidden":"true"}},[t._v("#")]),t._v(" api.plugins")]),t._v(" "),a("p",[t._v("All discovered and loaded plugins are listed in this property. It is an object mapping a "),a("router-link",{attrs:{to:"/api/plugins.html#roles"}},[t._v("plugin's role")]),t._v(" (which might be different from its name!) into either plugin's API.")],1),t._v(" "),a("h3",{attrs:{id:"api-cmp"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#api-cmp","aria-hidden":"true"}},[t._v("#")]),t._v(" api.cmp")]),t._v(" "),a("p",[a("strong",[t._v("Signature:")]),t._v(" "),a("code",[t._v('api.cmp( "./my/module", [ arg1, arg2 ] )')])]),t._v(" "),a("p",[t._v("This method is loading selected module with support for "),a("a",{attrs:{href:"#using-common-module-pattern"}},[t._v("common module pattern")]),t._v(". Optionally provided arguments are passed in addition to options on invoking function exposed by selected module as part of common module pattern.")]),t._v(" "),a("p",[t._v("If selected module doesn't comply with that pattern it is loaded as usual.")]),t._v(" "),a("h3",{attrs:{id:"api-cmfp"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#api-cmfp","aria-hidden":"true"}},[t._v("#")]),t._v(" api.cmfp")]),t._v(" "),a("p",[a("strong",[t._v("Signature:")]),t._v(" "),a("code",[t._v("api.cmfp( someFunction, [ arg1, arg2 ] )")])]),t._v(" "),a("p",[t._v("This method is invoking some function provided by reference with support for "),a("em",[t._v("common module function pattern")]),t._v(". This pattern is derived from "),a("a",{attrs:{href:"#using-common-module-pattern"}},[t._v("common module pattern")]),t._v(" and is meant to invoke particular functions of plugins in a similar way.")]),t._v(" "),a("p",[t._v("Invoked functions are assumed to expect Hitchy's API as "),a("code",[t._v("this")]),t._v(" and global options provided in first argument which is implicitly prepended by this method.")]),t._v(" "),a("h2",{attrs:{id:"request-helpers"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#request-helpers","aria-hidden":"true"}},[t._v("#")]),t._v(" Request Helpers")]),t._v(" "),a("p",[t._v("In request handlers of "),a("router-link",{attrs:{to:"/internals/components.html#controllers"}},[t._v("controllers")]),t._v(" and "),a("router-link",{attrs:{to:"/internals/components.html#policies"}},[t._v("policies")]),t._v(" there are two provided arguments usually named "),a("code",[t._v("req")]),t._v(" and "),a("code",[t._v("res")]),t._v(". The former is basically an "),a("a",{attrs:{href:"https://nodejs.org/dist/latest/docs/api/http.html#http_class_http_incomingmessage",target:"_blank",rel:"noopener noreferrer"}},[t._v("IncomingMessage"),a("OutboundLink")],1),t._v(" and the latter is a "),a("a",{attrs:{href:"https://nodejs.org/dist/latest/docs/api/http.html#http_class_http_serverresponse",target:"_blank",rel:"noopener noreferrer"}},[t._v("ServerResponse"),a("OutboundLink")],1),t._v(". But either object is extended to provide additional information and functionality.")],1),t._v(" "),a("div",{staticClass:"warning custom-block"},[a("p",{staticClass:"custom-block-title"},[t._v("Standalone vs. Integrated With ExpressJS")]),t._v(" "),a("p",[t._v("Most helpers described here are basically available in a standalone Hitchy application. When using "),a("router-link",{attrs:{to:"/internals/architecture-basics.html#integrating-with-services"}},[t._v("Hitchy integrated with ExpressJS")]),t._v(" most of these helpers are provided by ExpressJS and thus may behave differently.")],1)]),t._v(" "),a("h3",{attrs:{id:"req-accept"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#req-accept","aria-hidden":"true"}},[t._v("#")]),t._v(" "),a("code",[t._v("req.accept")])]),t._v(" "),a("p",[t._v("A properly sorted list of MIME type ranges is provided in this property according to any current request's "),a("a",{attrs:{href:"https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Accept",target:"_blank",rel:"noopener noreferrer"}},[t._v("Accept"),a("OutboundLink")],1),t._v(" header field. There is always a list of MIME ranges and either item is provided without optional parameters.")]),t._v(" "),a("div",{staticClass:"tip custom-block"},[a("p",{staticClass:"custom-block-title"},[t._v("Example")]),t._v(" "),a("p",[t._v("When handling request with header "),a("code",[t._v("Accept: text/*;q=0.5, text/json")]),t._v(" this property will expose sorted list of given MIME ranges "),a("code",[t._v('[ "text/json", "text/*" ]')]),t._v(".")])]),t._v(" "),a("h3",{attrs:{id:"req-cookies"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#req-cookies","aria-hidden":"true"}},[t._v("#")]),t._v(" "),a("code",[t._v("req.cookies")])]),t._v(" "),a("div",{staticClass:"warning custom-block"},[a("p",{staticClass:"custom-block-title"},[t._v("Requires Plugin")]),t._v(" "),a("p",[t._v("This property requires installation of plugin "),a("a",{attrs:{href:"https://www.npmjs.com/package/hitchy-plugin-cookies",target:"_blank",rel:"noopener noreferrer"}},[t._v("hitchy-plugin-cookies"),a("OutboundLink")],1),t._v(" as a dependency of your project.")])]),t._v(" "),a("p",[t._v("This property exposes object containing all cookies transmitted by client in current request.")]),t._v(" "),a("h3",{attrs:{id:"req-fetchbody-parser"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#req-fetchbody-parser","aria-hidden":"true"}},[t._v("#")]),t._v(" "),a("code",[t._v("req.fetchBody( parser )")])]),t._v(" "),a("p",[t._v("This method promises request's body. The optional parameter can be used to control parser used for extracting contained information.")]),t._v(" "),a("div",{staticClass:"warning custom-block"},[a("p",[t._v("When integrating with ExpressJS this function has limited capabilities to access the raw body and parsed for custom content.")])]),t._v(" "),a("ul",[a("li",[a("p",[t._v("When omitted or set "),a("code",[t._v("null")]),t._v(" any parser function in configuration is used to commonly parse raw body for contained information. When there is no configured parser some fallback is used supporting JSON and form-encoded request bodies.")])]),t._v(" "),a("li",[a("p",[t._v("On providing function here this one is used to parse the raw body instead of any configured or fallback parser.")])]),t._v(" "),a("li",[a("p",[t._v("On providing "),a("code",[t._v("false")]),t._v(" the raw body is promised as instance of Buffer. This is bypassing any parser to be invoked thus won't result in caching some parser's output as well.")]),t._v(" "),a("div",{staticClass:"warning custom-block"},[a("p",[t._v("This method is caching any previously extracted body data. Thus, re-invoking this method with a different parameter doesn't result in another set of information but fetches the same result as before.")]),t._v(" "),a("p",[t._v("Providing "),a("code",[t._v("false")]),t._v(" is the only exclusion from this rule.")])])])]),t._v(" "),a("h3",{attrs:{id:"req-hitchy"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#req-hitchy","aria-hidden":"true"}},[t._v("#")]),t._v(" "),a("code",[t._v("req.hitchy")])]),t._v(" "),a("p",[t._v("This property is exposing "),a("a",{attrs:{href:"#hitchys-api"}},[t._v("Hitchy's API")]),t._v(".")]),t._v(" "),a("h3",{attrs:{id:"req-params"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#req-params","aria-hidden":"true"}},[t._v("#")]),t._v(" "),a("code",[t._v("req.params")])]),t._v(" "),a("p",[t._v("This object is populated with named segments of currently dispatched route.")]),t._v(" "),a("div",{staticClass:"tip custom-block"},[a("p",{staticClass:"custom-block-title"},[t._v("Example")]),t._v(" "),a("p",[t._v("If your handler is bound to handle a route like "),a("code",[t._v("GET /api/:model/:item")]),t._v(" and client was requesting "),a("code",[t._v("/api/user/123")]),t._v(" then "),a("code",[t._v("req.params")]),t._v(" looks like this:")]),t._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    model"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"user"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    item"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"123"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])]),t._v(" "),a("h3",{attrs:{id:"req-path"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#req-path","aria-hidden":"true"}},[t._v("#")]),t._v(" "),a("code",[t._v("req.path")])]),t._v(" "),a("p",[t._v("This property conveniently provides current request's path which is the requested URL without any appended query string or hash.")]),t._v(" "),a("div",{staticClass:"tip custom-block"},[a("p",{staticClass:"custom-block-title"},[t._v("Example")]),t._v(" "),a("p",[t._v("On requesting "),a("code",[t._v("/some/path/name?with=arg")]),t._v(" this property will provide "),a("code",[t._v("/some/path/name")]),t._v(".")])]),t._v(" "),a("h3",{attrs:{id:"req-query"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#req-query","aria-hidden":"true"}},[t._v("#")]),t._v(" "),a("code",[t._v("req.query")])]),t._v(" "),a("p",[t._v("This property is an object exposing all query parameters.")]),t._v(" "),a("div",{staticClass:"tip custom-block"},[a("p",{staticClass:"custom-block-title"},[t._v("Example")]),t._v(" "),a("p",[t._v("On requesting "),a("code",[t._v("/some/path/name?with=arg&another=one")]),t._v(" this property will provide the following object:")]),t._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    with"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"arg"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    another"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"one"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])]),t._v(" "),a("h3",{attrs:{id:"req-session"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#req-session","aria-hidden":"true"}},[t._v("#")]),t._v(" "),a("code",[t._v("req.session")])]),t._v(" "),a("div",{staticClass:"warning custom-block"},[a("p",{staticClass:"custom-block-title"},[t._v("Requires Plugin")]),t._v(" "),a("p",[t._v("This property requires installation of plugin "),a("a",{attrs:{href:"https://www.npmjs.com/package/hitchy-plugin-session",target:"_blank",rel:"noopener noreferrer"}},[t._v("hitchy-plugin-session"),a("OutboundLink")],1),t._v(" as a dependency of your project.")])]),t._v(" "),a("p",[t._v("This object consists of two properties meant to provide server-side session shared by different requests transmitted from same client.")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("In "),a("code",[t._v("req.session.user")]),t._v(" currently authenticated user is stored.")]),t._v(" "),a("div",{staticClass:"warning custom-block"},[a("p",[t._v("This feature needs installation of another plugin, e.g. "),a("a",{attrs:{href:"https://www.npmjs.com/package/hitchy-plugin-auth",target:"_blank",rel:"noopener noreferrer"}},[t._v("hitchy-plugin-auth"),a("OutboundLink")],1),t._v(".")])])]),t._v(" "),a("li",[a("p",[a("code",[t._v("req.session.data")]),t._v(" can be used in your controllers and policies to store arbitrary information regarding currently requesting client.")]),t._v(" "),a("p",[t._v("Make sure any stored information can be serialized, thus you shouldn't put instances of some custom class in here, but use native data suitable for converting to/from JSON, only.")])])]),t._v(" "),a("div",{staticClass:"tip custom-block"},[a("p",{staticClass:"custom-block-title"},[t._v("Supported Scenarios")]),t._v(" "),a("p",[t._v("Sessions rely on client passing session cookie in every request following some initial one. Usually this is available with browsers requesting pages and assets on behalf of a user. You should not rely on this session feature when it comes to REST APIs, though.")])]),t._v(" "),a("h2",{attrs:{id:"response-helpers"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#response-helpers","aria-hidden":"true"}},[t._v("#")]),t._v(" Response Helpers")]),t._v(" "),a("p",[t._v("In handling requests there is a response manager provided in second argument usually named "),a("code",[t._v("res")]),t._v(". Basically this is an instance of "),a("a",{attrs:{href:"https://nodejs.org/dist/latest/docs/api/http.html#http_class_http_serverresponse",target:"_blank",rel:"noopener noreferrer"}},[t._v("ServerResponse"),a("OutboundLink")],1),t._v(". But Hitchy is injecting some additional methods for simplifying generation of responses.")]),t._v(" "),a("div",{staticClass:"tip custom-block"},[a("p",{staticClass:"custom-block-title"},[t._v("Fluent Interface")]),t._v(" "),a("p",[t._v("Those "),a("em",[t._v("additional methods")]),t._v(" listed below are providing fluent interface for chaining multiple invocations.")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[t._v("res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("status")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("400")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("set")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"content-type"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"text/json"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("send")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("However, signatures of methods natively provided as part of "),a("a",{attrs:{href:"https://nodejs.org/dist/latest/docs/api/http.html#http_class_http_serverresponse",target:"_blank",rel:"noopener noreferrer"}},[t._v("ServerResponse"),a("OutboundLink")],1),t._v(" aren't adjusted.")])]),t._v(" "),a("div",{staticClass:"tip custom-block"},[a("p",{staticClass:"custom-block-title"},[t._v("Preventing Response on HEAD Requests "),a("Badge",{attrs:{type:"info"}},[t._v("v0.2.2+")])],1),t._v(" "),a("p",[t._v("Requests using HTTP method HEAD must not provide a response. Disobeying this usually results in exceptions thrown e.g. on trying to send some JSON-formatted response.")]),t._v(" "),a("p",[t._v("Hitchy is designed to detect any such request limiting capabilities of response manager's methods related to describing some actual content. That's why you don't need to take care of omitting response content in handlers supported HEAD requests as well.")])]),t._v(" "),a("div",{staticClass:"warning custom-block"},[a("p",{staticClass:"custom-block-title"},[t._v("Standalone vs. Integrated With ExpressJS")]),t._v(" "),a("p",[t._v("Most helpers described here are basically available in a standalone Hitchy application. When using "),a("router-link",{attrs:{to:"/internals/architecture-basics.html#integrating-with-services"}},[t._v("Hitchy integrated with ExpressJS")]),t._v(" most of these helpers are provided by ExpressJS and thus may behave differently.")],1)]),t._v(" "),a("h3",{attrs:{id:"res-format-handlers"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#res-format-handlers","aria-hidden":"true"}},[t._v("#")]),t._v(" "),a("code",[t._v("res.format( handlers )")])]),t._v(" "),a("p",[t._v("This method provides different handlers for generating response with each handler bound to one particular type or format of response data. According to current request's "),a("a",{attrs:{href:"https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Accept",target:"_blank",rel:"noopener noreferrer"}},[t._v("Accept"),a("OutboundLink")],1),t._v(" header the best matching handler is picked to eventually create a response.")]),t._v(" "),a("p",[t._v("A special handler named "),a("code",[t._v("default")]),t._v(" is used if neither provided handler is matching any type of response accepted in current request. If this default handler is missing a "),a("code",[t._v("406 Not Acceptable")]),t._v(" is issued implicitly in that case.")]),t._v(" "),a("p",[t._v("Handlers' names are either MIME types or some supported filename extensions considered aliases for related MIME type.")]),t._v(" "),a("div",{staticClass:"tip custom-block"},[a("p",{staticClass:"custom-block-title"},[t._v("Example")]),t._v(" "),a("p",[t._v("Using this function in a request handler")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[t._v("res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("format")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("html")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("req"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" res")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("send")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"<html>...</html>"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"text/json"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" req"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" res "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("json")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" some"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"data"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" req"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" res "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("status")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("400")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("send")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"unsupported type of response"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[t._v("the response is provided as JSON when requesting with "),a("code",[t._v("Accept: text/json")]),t._v(" and as an HTML document when requesting with "),a("code",[t._v("Accept: text/html")]),t._v(".")])]),t._v(" "),a("h3",{attrs:{id:"res-json-data"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#res-json-data","aria-hidden":"true"}},[t._v("#")]),t._v(" "),a("code",[t._v("res.json( data )")])]),t._v(" "),a("p",[t._v("This method generates a JSON-formatted response and sends it to the client. It is ending current response implicitly.")]),t._v(" "),a("div",{staticClass:"tip custom-block"},[a("p",{staticClass:"custom-block-title"},[t._v("Example")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[t._v("res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("json")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" some"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"data"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])]),t._v(" "),a("h3",{attrs:{id:"res-redirect-statuscode-url"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#res-redirect-statuscode-url","aria-hidden":"true"}},[t._v("#")]),t._v(" "),a("code",[t._v("res.redirect( statusCode, url )")])]),t._v(" "),a("p",[t._v("Use this helper to instantly generate and send response requesting user to fetch different URL for some desired information.")]),t._v(" "),a("div",{staticClass:"tip custom-block"},[a("p",{staticClass:"custom-block-title"},[t._v("Example")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[t._v("res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("redirect")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("301")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"https://example.com/"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])]),t._v(" "),a("h3",{attrs:{id:"res-send-content"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#res-send-content","aria-hidden":"true"}},[t._v("#")]),t._v(" "),a("code",[t._v("res.send( content )")])]),t._v(" "),a("p",[t._v("This method is sending provided content to the client implicitly ending response to current request. The response's type of content depends on type of value provided as "),a("code",[t._v("content")]),t._v(" here:")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("Providing an object the response is JSON-formatted.")])]),t._v(" "),a("li",[a("p",[t._v("When providing a string the response is sent as plain text unless having set some different "),a("code",[t._v("content-type")]),t._v(" header before.")])]),t._v(" "),a("li",[a("p",[t._v("When providing an instance of Buffer or any other kind of data the response is an octet stream with MIME type "),a("code",[t._v("application/octet-stream")]),t._v(".")])])]),t._v(" "),a("div",{staticClass:"tip custom-block"},[a("p",{staticClass:"custom-block-title"},[t._v("Example")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[t._v("res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("send")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" some"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"data"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[t._v("res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("send")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" Buffer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("from")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"..."')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])]),t._v(" "),a("h3",{attrs:{id:"res-set-name-value"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#res-set-name-value","aria-hidden":"true"}},[t._v("#")]),t._v(" "),a("code",[t._v("res.set( name, value )")])]),t._v(" "),a("p",[t._v("Adjusts single field of response header. Internally this function is invoking "),a("code",[t._v("res.setHeader()")]),t._v(".")]),t._v(" "),a("div",{staticClass:"tip custom-block"},[a("p",{staticClass:"custom-block-title"},[t._v("Example")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[t._v("res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("set")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"content-type"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"text/json;charset=utf8"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[t._v("res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("set")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"x-api-level"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"3"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])]),t._v(" "),a("h3",{attrs:{id:"res-set-fields"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#res-set-fields","aria-hidden":"true"}},[t._v("#")]),t._v(" "),a("code",[t._v("res.set( fields )")])]),t._v(" "),a("p",[t._v("Adjusts multiple fields of response header at once. Internally this function is invoking "),a("code",[t._v("res.setHeader()")]),t._v(" for every listed header field.")]),t._v(" "),a("div",{staticClass:"tip custom-block"},[a("p",{staticClass:"custom-block-title"},[t._v("Example")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[t._v("res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("set")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"content-type"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"text/json;charset=utf8"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"x-api-level"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"3"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])]),t._v(" "),a("h3",{attrs:{id:"res-status-code"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#res-status-code","aria-hidden":"true"}},[t._v("#")]),t._v(" "),a("code",[t._v("res.status( code )")])]),t._v(" "),a("p",[t._v("Adjusts HTTP response status code.")]),t._v(" "),a("div",{staticClass:"tip custom-block"},[a("p",{staticClass:"custom-block-title"},[t._v("Example")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[t._v("res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("status")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("404")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("json")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" error"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"no such data"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])]),t._v(" "),a("h3",{attrs:{id:"res-type-mime"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#res-type-mime","aria-hidden":"true"}},[t._v("#")]),t._v(" "),a("code",[t._v("res.type( mime )")])]),t._v(" "),a("p",[t._v("Adjusts "),a("code",[t._v("content-type")]),t._v(" header field of response supporting several aliases for simplified selection of response type.")]),t._v(" "),a("div",{staticClass:"tip custom-block"},[a("p",{staticClass:"custom-block-title"},[t._v("Example")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[t._v("res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("type")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"json"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("send")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("JSON")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("stringify")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[t._v("res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("type")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"image/png"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("send")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" bufferContainingPNG "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])])])},[],!1,null,null,null);s.default=n.exports}}]);