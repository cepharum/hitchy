<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Components</title>
    <meta name="description" content="">
    
    
    <link rel="preload" href="/core/assets/css/0.styles.d8598aae.css" as="style"><link rel="preload" href="/core/assets/js/app.4ffeb923.js" as="script"><link rel="preload" href="/core/assets/js/2.f769246b.js" as="script"><link rel="preload" href="/core/assets/js/8.8318e93e.js" as="script"><link rel="prefetch" href="/core/assets/js/10.19dd751e.js"><link rel="prefetch" href="/core/assets/js/11.482bb2cb.js"><link rel="prefetch" href="/core/assets/js/12.36aaded0.js"><link rel="prefetch" href="/core/assets/js/13.e27181e3.js"><link rel="prefetch" href="/core/assets/js/14.90348d63.js"><link rel="prefetch" href="/core/assets/js/3.38429046.js"><link rel="prefetch" href="/core/assets/js/4.8e1e8696.js"><link rel="prefetch" href="/core/assets/js/5.e894468a.js"><link rel="prefetch" href="/core/assets/js/6.f20e22a4.js"><link rel="prefetch" href="/core/assets/js/7.e27a9954.js"><link rel="prefetch" href="/core/assets/js/9.68338cf9.js">
    <link rel="stylesheet" href="/core/assets/css/0.styles.d8598aae.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/core/" class="home-link router-link-active"></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/core/" class="nav-link">Home</a></div><div class="nav-item"><a href="/core/tutorials/" class="nav-link">Tutorials</a></div><div class="nav-item"><a href="/core/internals/" class="nav-link router-link-active">Internals</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/core/" class="nav-link">Home</a></div><div class="nav-item"><a href="/core/tutorials/" class="nav-link">Tutorials</a></div><div class="nav-item"><a href="/core/internals/" class="nav-link router-link-active">Internals</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Components</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/core/internals/components.html#kinds-of-components" class="sidebar-link">Kinds of Components</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/core/internals/components.html#controllers" class="sidebar-link">Controllers</a></li><li class="sidebar-sub-header"><a href="/core/internals/components.html#policies" class="sidebar-link">Policies</a></li><li class="sidebar-sub-header"><a href="/core/internals/components.html#models" class="sidebar-link">Models</a></li><li class="sidebar-sub-header"><a href="/core/internals/components.html#services" class="sidebar-link">Services</a></li></ul></li><li><a href="/core/internals/components.html#exposure-at-runtime" class="sidebar-link">Exposure At Runtime</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="components"><a href="#components" aria-hidden="true" class="header-anchor">#</a> Components</h1> <p>A Hitchy-based application relies on components to be exposed by the application as well as any available plugin. When there are multiple files in installed plugins and your application for the same component all those files are merged in order of plugin discovery.</p> <p>Either component's file is used to derive the component's name. The former are assumed to be in kebab-case, camelCase or PascalCase. The extension <strong>.js</strong> is always dropped. The component's name is in PascalCase.</p> <div class="tip custom-block"><p class="custom-block-title">Example</p> <p>A file in folder <strong>api/services/file-zipper.js</strong> is assumed to provide the service component named <strong>FileZipper</strong>.</p></div> <p>Hitchy knows different kinds of components to be introduced here.</p> <h2 id="kinds-of-components"><a href="#kinds-of-components" aria-hidden="true" class="header-anchor">#</a> Kinds of Components</h2> <h3 id="controllers"><a href="#controllers" aria-hidden="true" class="header-anchor">#</a> Controllers</h3> <p>Controllers are discovered in folder <strong>api/controllers</strong> of your application as well as any installed plugin. They are meant to expose request handlers that can be addressed in route configuration.</p> <p><strong>config/routes.js</strong></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>exports<span class="token punctuation">.</span>routes <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;/my/route&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;MyController.handleRoute&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>api/controllers/file.js</strong></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token function">handleRoute</span><span class="token punctuation">(</span> <span class="token parameter">req<span class="token punctuation">,</span> res</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
        res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span> <span class="token string">&quot;Hey!&quot;</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="policies"><a href="#policies" aria-hidden="true" class="header-anchor">#</a> Policies</h3> <p>Policy components are discovered in folder <strong>api/policies</strong> of your application as well as any installed plugin. They are meant to expose code that can be injected into request handling as part of policies. They work similar to controllers but thus are addressable in configuration of policies, only.</p> <p><strong>config/routes.js</strong></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>exports<span class="token punctuation">.</span>policies <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;/&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;BodyPolicy.mark&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>api/policies/body.js</strong></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token function">mark</span><span class="token punctuation">(</span> <span class="token parameter">req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> next</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
        req<span class="token punctuation">.</span>marked <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="models"><a href="#models" aria-hidden="true" class="header-anchor">#</a> Models</h3> <p>Models are discovered in folder <strong>api/models</strong> of your application as well as any installed plugin. They are used to describe structured data and managing access on it.</p> <div class="warning custom-block"><p>Hitchy doesn't know much about handling data. You might want to check out existing plugin <strong>hitchy-plugin-odem</strong> for that.</p></div> <h3 id="services"><a href="#services" aria-hidden="true" class="header-anchor">#</a> Services</h3> <p>Service components are discovered in folder <strong>api/services</strong> of your application as well as any installed plugin. They are meant to provide commonly required features and abilities.</p> <h2 id="exposure-at-runtime"><a href="#exposure-at-runtime" aria-hidden="true" class="header-anchor">#</a> Exposure At Runtime</h2> <p>All components are exposed at runtime via Hitchy's API. In request handlers this API is available as <code>this.api</code>. Components are exposed in section <strong>runtime</strong> and grouped by either component's type. That's why there are these collections available:</p> <ul><li><code>this.api.runtime.controllers</code></li> <li><code>this.api.runtime.policies</code></li> <li><code>this.api.runtime.models</code></li> <li><code>this.api.runtime.services</code></li></ul> <div class="warning custom-block"><p>In either collection components are exposed using PascalCase name.</p></div> <p>For example, the following request handler is accessing a service component named <code>FileZipper</code> which is discovered in file <strong>api/service/file-zipper.js</strong>:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">req<span class="token punctuation">,</span> res</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
    res
        <span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span> <span class="token number">200</span> <span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">.</span>api<span class="token punctuation">.</span>runtime<span class="token punctuation">.</span>service<span class="token punctuation">.</span>FileZipper<span class="token punctuation">.</span><span class="token function">listFromArchive</span><span class="token punctuation">(</span> <span class="token string">&quot;some/archive&quot;</span> <span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/core/assets/js/app.4ffeb923.js" defer></script><script src="/core/assets/js/2.f769246b.js" defer></script><script src="/core/assets/js/8.8318e93e.js" defer></script>
  </body>
</html>
